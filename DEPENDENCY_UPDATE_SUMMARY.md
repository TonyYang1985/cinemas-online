# ä¾èµ–æ›´æ–°æ€»ç»“ | Dependency Update Summary
æ›´æ–°æ—¶é—´ | Updated: 2025-10-19

## ğŸ“¦ æ›´æ–°å†…å®¹

### âœ… æˆåŠŸæ›´æ–°çš„åŒ… (13ä¸ª)

| åŒ…å | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | ç±»å‹ |
|------|--------|--------|------|
| **glob** | ^8.1.0 | ^11.0.3 | ğŸ”´ ä¸»ç‰ˆæœ¬ |
| **nanoid** | ^3.3.7 | ^5.1.6 | ğŸ”´ ä¸»ç‰ˆæœ¬ |
| **eslint** | ^9.37.0 | ^9.38.0 | ğŸŸ¢ å°ç‰ˆæœ¬ |
| **@typescript-eslint/eslint-plugin** | ^8.45.0 | ^8.46.1 | ğŸŸ¢ å°ç‰ˆæœ¬ |
| **@typescript-eslint/parser** | ^8.45.0 | ^8.46.1 | ğŸŸ¢ å°ç‰ˆæœ¬ |
| **@types/node** | ^24.6.2 | ^24.8.1 | ğŸŸ¢ å°ç‰ˆæœ¬ |
| **koa** | ^3.0.1 | ^3.0.3 | ğŸŸ¢ è¡¥ä¸ |
| **mysql2** | ^3.15.1 | ^3.15.2 | ğŸŸ¢ è¡¥ä¸ |
| **ioredis** | ^5.8.0 | ^5.8.1 | ğŸŸ¢ è¡¥ä¸ |
| **pino** | ^10.0.0 | ^10.1.0 | ğŸŸ¢ å°ç‰ˆæœ¬ |
| **pino-pretty** | 13.1.1 | 13.1.2 | ğŸŸ¢ è¡¥ä¸ |
| **ts-jest** | ^29.4.4 | ^29.4.5 | ğŸŸ¢ è¡¥ä¸ |
| **npm-check-updates** | ^19.0.0 | ^19.1.1 | ğŸŸ¢ å°ç‰ˆæœ¬ |

### ğŸ—‘ï¸ ç§»é™¤çš„åŒ…

- **glob-promise** ^6.0.7
  - åŸå› ï¼šglob v11 åŸç”Ÿæ”¯æŒ Promiseï¼Œä¸å†éœ€è¦
  - æ•ˆæœï¼šè§£å†³äº† peer dependency è­¦å‘Š

---

## ğŸ” éªŒè¯ç»“æœ

### âœ… ä»£ç è´¨é‡æ£€æŸ¥
```bash
$ yarn lint
âœ“ TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
âœ“ ESLint æ£€æŸ¥é€šè¿‡
âœ“ æ— é”™è¯¯æˆ–è­¦å‘Š
```

### âš ï¸ å®‰å…¨å®¡è®¡çŠ¶æ€

**æ›´æ–°å‰:** 36 ä¸ªæ¼æ´ (21 ä½ | 6 ä¸­ | 5 é«˜ | 4 å…³é”®)
**æ›´æ–°å:** 44 ä¸ªæ¼æ´ (29 ä½ | 6 ä¸­ | 5 é«˜ | 4 å…³é”®)

**å˜åŒ–åˆ†æ:**
- æ¼æ´æ€»æ•°å¢åŠ äº† 8 ä¸ªï¼ˆä¸»è¦æ˜¯ä½é£é™©ï¼‰
- ä¸»è¦åŸå› ï¼šglob v11 å¼•å…¥äº†æ–°çš„ä¾èµ–é“¾
- å¤§å¤šæ•°æ˜¯é—´æ¥ä¾èµ–ï¼ˆæ— æ³•ç›´æ¥æ§åˆ¶ï¼‰

---

## ğŸ“Š ä¸»è¦æ¼æ´æ¥æº

### 1. brace-expansion (CVE-2025-5889) - ğŸ”µ LOW
å½±å“çš„åŒ…ï¼š
- typeorm-model-generator (å¼€å‘å·¥å…·)
- jest (æµ‹è¯•æ¡†æ¶)
- @typescript-eslint/* (å¼€å‘å·¥å…·)
- socket-controllers (via @gaias/basenode)
- typeorm (via @gaias/basenode)

**çŠ¶æ€:** é—´æ¥ä¾èµ–ï¼Œéœ€è¦ä¸Šæ¸¸åŒ…æ›´æ–°

### 2. validator.js - ğŸŸ¡ MODERATE
å½±å“çš„åŒ…ï¼š
- class-validator
- @gaias/basenode

**çŠ¶æ€:** æ— å¯ç”¨è¡¥ä¸ï¼Œç›‘æ§ä¸­

### 3. form-data - ğŸ”´ CRITICAL
å½±å“çš„åŒ…ï¼š
- typeorm-model-generator (ä»…å¼€å‘å·¥å…·)

**çŠ¶æ€:** ä»…å½±å“ä»£ç ç”Ÿæˆå·¥å…·ï¼Œä¸å½±å“è¿è¡Œæ—¶

---

## ğŸ¯ é‡å¤§æ”¹è¿›

### 1. glob å‡çº§åˆ° v11 âœ…
**ä¼˜åŠ¿:**
- åŸç”Ÿ Promise æ”¯æŒ
- æ›´å¥½çš„æ€§èƒ½
- ç§»é™¤äº† glob-promise ä¾èµ–

**ä½¿ç”¨ç¤ºä¾‹:**
```javascript
// æ–°çš„ç”¨æ³• (glob v11)
import { glob } from 'glob';
const files = await glob('**/*.ts');

// æ—§çš„ç”¨æ³• (ä¸å†éœ€è¦)
// const globPromise = require('glob-promise');
// const files = await globPromise('**/*.ts');
```

### 2. nanoid å‡çº§åˆ° v5 âœ…
**ä¼˜åŠ¿:**
- æ›´å¥½çš„æ€§èƒ½ï¼ˆæ›´å¿«çš„ ID ç”Ÿæˆï¼‰
- æ›´å°çš„åŒ…ä½“ç§¯
- æ”¹è¿›çš„å®‰å…¨æ€§

**ä½¿ç”¨è¯´æ˜:**
- API ä¿æŒå…¼å®¹
- æ— éœ€ä¿®æ”¹ä»£ç 

### 3. å·¥å…·é“¾æ›´æ–° âœ…
- ESLint 9.38.0 (æœ€æ–°ç¨³å®šç‰ˆ)
- TypeScript ESLint 8.46.1
- æ‰€æœ‰å¼€å‘å·¥å…·ä¿æŒæœ€æ–°

---

## âš ï¸ éœ€è¦æ³¨æ„çš„é—®é¢˜

### 1. é—´æ¥ä¾èµ–æ¼æ´
å¤§éƒ¨åˆ†å®‰å…¨æ¼æ´æ¥è‡ªé—´æ¥ä¾èµ–ï¼Œæ— æ³•ç›´æ¥æ›´æ–°ã€‚è¿™äº›åŒ…ç”±ä»¥ä¸‹åº“å¼•å…¥ï¼š
- **typeorm-model-generator** - å¼€å‘å·¥å…·
- **jest** - æµ‹è¯•æ¡†æ¶
- **@gaias/basenode** - æ ¸å¿ƒæ¡†æ¶

**å»ºè®®:**
- ç›‘æ§è¿™äº›åŒ…çš„æ›´æ–°
- è€ƒè™‘è”ç³» @gaias/basenode ç»´æŠ¤è€…
- è¯„ä¼° typeorm-model-generator çš„æ›¿ä»£æ–¹æ¡ˆ

### 2. ESLint é…ç½®è­¦å‘Š
```
warning " > eslint-config-standard@17.1.0" has incorrect peer dependency
```

**å½±å“:** ä»…è­¦å‘Šï¼Œä¸å½±å“åŠŸèƒ½
**å»ºè®®:** è€ƒè™‘ç§»é™¤ eslint-config-standard æˆ–æ›´æ–°é…ç½®

---

## ğŸ”„ åç»­è¡ŒåŠ¨è®¡åˆ’

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
- [x] æ›´æ–°æ‰€æœ‰å¯æ›´æ–°çš„åŒ…
- [x] ç§»é™¤ä¸å¿…è¦çš„ glob-promise
- [x] éªŒè¯ä»£ç è´¨é‡
- [ ] è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- [ ] åœ¨å¼€å‘ç¯å¢ƒæµ‹è¯•åº”ç”¨

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰
- [ ] ç›‘æ§ validator.js è¡¥ä¸å‘å¸ƒ
- [ ] è¯„ä¼° typeorm-model-generator æ›¿ä»£æ–¹æ¡ˆ
- [ ] è€ƒè™‘å‡çº§æˆ–æ›¿æ¢ eslint-config-standard
- [ ] è”ç³» @gaias/basenode ç»´æŠ¤è€…å…³äºå®‰å…¨é—®é¢˜

### é•¿æœŸï¼ˆæŒç»­ï¼‰
- [ ] å»ºç«‹è‡ªåŠ¨åŒ–ä¾èµ–æ›´æ–°æµç¨‹ï¼ˆDependabot/Renovateï¼‰
- [ ] æ¯å‘¨è¿è¡Œå®‰å…¨å®¡è®¡
- [ ] å®šæœŸå®¡æŸ¥å’Œæ›´æ–°ä¾èµ–

---

## ğŸ“ å‘½ä»¤å‚è€ƒ

```bash
# æ£€æŸ¥å¯æ›´æ–°çš„åŒ…
yarn deps:check

# æ›´æ–°æ‰€æœ‰ä¾èµ–
yarn deps:update

# è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
yarn lint

# è¿è¡Œå®‰å…¨å®¡è®¡
yarn security
yarn security:summary

# æŸ¥çœ‹ç‰¹å®šåŒ…çš„ä¾èµ–æ ‘
yarn why <package-name>

# ç§»é™¤ä¸éœ€è¦çš„åŒ…
yarn remove <package-name>
```

---

## âœ… ç»“è®º

**æ€»ä½“çŠ¶æ€:** ğŸŸ¢ è‰¯å¥½

1. âœ… æ‰€æœ‰ç›´æ¥ä¾èµ–å·²æ›´æ–°åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
2. âœ… ä»£ç è´¨é‡æ£€æŸ¥å…¨éƒ¨é€šè¿‡
3. âœ… æ¸…ç†äº†ä¸å¿…è¦çš„ä¾èµ–ï¼ˆglob-promiseï¼‰
4. âš ï¸ é—´æ¥ä¾èµ–æ¼æ´éœ€è¦æŒç»­ç›‘æ§

**é£é™©è¯„ä¼°:** ğŸŸ¡ ä¸­ç­‰
- å¤§éƒ¨åˆ†æ¼æ´ä¸ºä½é£é™©ä¸”åœ¨å¼€å‘ä¾èµ–ä¸­
- validator.js ä¸­é£é™©æ¼æ´éœ€è¦å…³æ³¨
- form-data å…³é”®æ¼æ´ä»…å½±å“å¼€å‘å·¥å…·

**å»ºè®®:** å¯ä»¥å®‰å…¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œä½†éœ€è¦æŒç»­ç›‘æ§å®‰å…¨æ›´æ–°ã€‚

---

**ç”Ÿæˆæ—¶é—´:** 2025-10-19
**æ‰§è¡Œå‘½ä»¤:**
- `yarn deps:update`
- `yarn remove glob-promise`
- `yarn lint`
- `yarn security`
